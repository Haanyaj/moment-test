{"ast":null,"code":"var _jsxFileName = \"/home/haan/moment-test/src/components/Pages/Movie.js\";\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport { withStyles } from '@material-ui/core/styles';\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { request_token, request_pages } from '../tools/ApiCalls';\nconst useStyles = makeStyles(theme => ({\n  root: {}\n}));\nconst defaultProps = {\n  bgcolor: 'background.paper',\n  m: 1,\n  style: {\n    width: '5rem',\n    height: '5rem'\n  },\n  borderColor: 'text.primary'\n};\nexport default function Movie() {\n  const classes = useStyles();\n  let datas = {\n    movies: [],\n    hasMoreItems: true,\n    totalPages: 0,\n    pages: 1,\n    language: \"fr-FR\"\n  };\n\n  function showItems() {\n    return datas.movies.map(item =>\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      item: true,\n      xs: 4,\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Card, {\n      onClick: this.handleOpenClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(CardActionArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 21\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(CardMedia, {\n      component: \"img\",\n      alt: item.original_title,\n      image: \"https://image.tmdb.org/t/p/w500\" + item.poster_path,\n      title: item.original_title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 25\n      }\n    }),\n    /*#__PURE__*/\n    React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 25\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 29\n      }\n    }, item.original_title),\n    /*#__PURE__*/\n    React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 29\n      }\n    }, \"Nombre de visionnage: \", item.popularity, \" fois\"))))));\n  }\n\n  async function getTotalPages() {\n    datas.totalPages = await request_pages();\n  }\n\n  async function loadMore() {\n    if (datas.pages === 2\n    /*this.state.totalPages*/\n    ) {\n        datas.hasMoreItems = false;\n      } else {\n      const response = await request_token(\"fr-FR\", datas.pages);\n      setTimeout(() => {\n        const add = datas.movies;\n        const to_add = add.concat(response);\n        datas.movies = to_add;\n      }, 2000);\n    }\n\n    datas.pages += 1;\n  }\n\n  return (\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(InfiniteScroll, {\n      loadMore: loadMore(),\n      hasMore: datas.hasMoreItems,\n      loader:\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 33\n        }\n      }, \" Loading... \"),\n      useWindow: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, showItems(), \" \"), \" \")))\n  );\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/Movie.js"],"names":["React","makeStyles","Paper","Container","withStyles","InfiniteScroll","request_token","request_pages","useStyles","theme","root","defaultProps","bgcolor","m","style","width","height","borderColor","Movie","classes","datas","movies","hasMoreItems","totalPages","pages","language","showItems","map","item","id","handleOpenClick","original_title","poster_path","popularity","getTotalPages","loadMore","response","setTimeout","add","to_add","concat"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport { withStyles } from '@material-ui/core/styles';\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport { request_token, request_pages } from '../tools/ApiCalls';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n\n    },\n}));\n\nconst defaultProps = {\n    bgcolor: 'background.paper',\n    m: 1,\n    style: { width: '5rem', height: '5rem' },\n    borderColor: 'text.primary',\n};\n\nexport default function Movie() {\n    const classes = useStyles();\n    let datas = {\n        movies: [],\n        hasMoreItems: true,\n        totalPages: 0,\n        pages: 1,\n        language: \"fr-FR\",\n    }\n    function showItems() {\n        return datas.movies.map(item => (\n            <Grid item xs={4} key={item.id} >\n                <Card onClick={this.handleOpenClick}>\n                    <CardActionArea>\n                        <CardMedia\n                            component=\"img\"\n                            alt={item.original_title}\n                            image={\"https://image.tmdb.org/t/p/w500\" + item.poster_path}\n                            title={item.original_title}\n\n                        />\n                        <CardContent >\n                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                                {item.original_title}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                {\"Nombre de visionnage: \"}\n                                {item.popularity}\n                                {\" fois\"}\n                            </Typography>\n                        </CardContent>\n                    </CardActionArea>\n                </Card>\n            </Grid>\n\n        ))\n    }\n\n    async function getTotalPages() {\n        datas.totalPages = await request_pages();\n    }\n\n    async function loadMore() {\n        if (datas.pages === 2 /*this.state.totalPages*/) {\n             datas.hasMoreItems = false;\n        } else {\n            const response = await request_token(\"fr-FR\", datas.pages);\n            setTimeout(() => {\n                const add = datas.movies;\n                const to_add = add.concat(response);\n                datas.movies = to_add\n            }, 2000);\n        }\n        datas.pages += 1\n    }\n\n    return (\n        <div className={classes.root}>\n            <Container>\n                <Grid>\n                    <InfiniteScroll\n                        loadMore={loadMore()}\n                        hasMore={datas.hasMoreItems}\n                        loader={<div className=\"loader\"> Loading... </div>}\n                        useWindow={false}\n                    >\n                        {showItems()}{\" \"}\n                    </InfiniteScroll>{\" \"}\n                </Grid>\n            </Container>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}