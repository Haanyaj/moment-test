{"ast":null,"code":"var _jsxFileName = \"/home/haan/moment-test/src/components/Pages/Movie.js\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport useBookSearch from './useBookSearch';\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const [pageNumber, setPageNumber] = useState(1);\n  const {\n    movies,\n    hasMore,\n    loading,\n    totalPages\n  } = useBookSearch(\"fr-FR\", pageNumber);\n  const observer = useRef();\n  const lastBookElementRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMore) {\n        setPageNumber(prevPageNumber => prevPageNumber + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loading, hasMore]);\n\n  function handleSearch(e) {\n    setPageNumber(1);\n  }\n\n  return (\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }\n    }, books.map((book, index) => {\n      if (books.length === index + 1) {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            ref: lastBookElementRef,\n            key: book,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 28\n            }\n          }, book)\n        );\n      } else {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            key: book,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 28\n            }\n          }, book)\n        );\n      }\n    }),\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    }, loading && 'Loading...'),\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, error && 'Error'))\n  );\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/Movie.js"],"names":["React","useState","useRef","useCallback","useBookSearch","App","query","setQuery","pageNumber","setPageNumber","movies","hasMore","loading","totalPages","observer","lastBookElementRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","handleSearch","e","books","map","book","index","length","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,WAAlC,QAAqD,OAArD;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,eAAe,SAASC,GAAT,GAAe;AAC1B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BR,QAAQ,CAAC,CAAD,CAA5C;AAEA,QAAM;AACFS,IAAAA,MADE;AAEFC,IAAAA,OAFE;AAGFC,IAAAA,OAHE;AAIFC,IAAAA;AAJE,MAKFT,aAAa,CAAC,OAAD,EAAUI,UAAV,CALjB;AAOA,QAAMM,QAAQ,GAAGZ,MAAM,EAAvB;AACA,QAAMa,kBAAkB,GAAGZ,WAAW,CAACa,IAAI,IAAI;AAC3C,QAAIJ,OAAJ,EAAa;AACb,QAAIE,QAAQ,CAACG,OAAb,EAAsBH,QAAQ,CAACG,OAAT,CAAiBC,UAAjB;AACtBJ,IAAAA,QAAQ,CAACG,OAAT,GAAmB,IAAIE,oBAAJ,CAAyBC,OAAO,IAAI;AACnD,UAAIA,OAAO,CAAC,CAAD,CAAP,CAAWC,cAAX,IAA6BV,OAAjC,EAA0C;AACtCF,QAAAA,aAAa,CAACa,cAAc,IAAIA,cAAc,GAAG,CAApC,CAAb;AACH;AACJ,KAJkB,CAAnB;AAKA,QAAIN,IAAJ,EAAUF,QAAQ,CAACG,OAAT,CAAiBM,OAAjB,CAAyBP,IAAzB;AACb,GATqC,EASnC,CAACJ,OAAD,EAAUD,OAAV,CATmC,CAAtC;;AAWA,WAASa,YAAT,CAAsBC,CAAtB,EAAyB;AACrBhB,IAAAA,aAAa,CAAC,CAAD,CAAb;AACH;;AAED;AAAA;AACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKiB,KAAK,CAACC,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACxB,UAAIH,KAAK,CAACI,MAAN,KAAiBD,KAAK,GAAG,CAA7B,EAAgC;AAC5B;AAAA;AAAO;AAAK,YAAA,GAAG,EAAEd,kBAAV;AAA8B,YAAA,GAAG,EAAEa,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA0CA,IAA1C;AAAP;AACH,OAFD,MAEO;AACH;AAAA;AAAO;AAAK,YAAA,GAAG,EAAEA,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAiBA,IAAjB;AAAP;AACH;AACJ,KANA,CADL;AAAA;AAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMhB,OAAO,IAAI,YAAjB,CARJ;AAAA;AASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMmB,KAAK,IAAI,OAAf,CATJ;AADJ;AAaH","sourcesContent":["import React, { useState, useRef, useCallback } from 'react'\nimport useBookSearch from './useBookSearch'\n\nexport default function App() {\n    const [query, setQuery] = useState('')\n    const [pageNumber, setPageNumber] = useState(1)\n\n    const {\n        movies,\n        hasMore,\n        loading,\n        totalPages,\n    } = useBookSearch(\"fr-FR\", pageNumber)\n\n    const observer = useRef()\n    const lastBookElementRef = useCallback(node => {\n        if (loading) return\n        if (observer.current) observer.current.disconnect()\n        observer.current = new IntersectionObserver(entries => {\n            if (entries[0].isIntersecting && hasMore) {\n                setPageNumber(prevPageNumber => prevPageNumber + 1)\n            }\n        })\n        if (node) observer.current.observe(node)\n    }, [loading, hasMore])\n\n    function handleSearch(e) {\n        setPageNumber(1)\n    }\n\n    return (\n        <div>\n            {books.map((book, index) => {\n                if (books.length === index + 1) {\n                    return <div ref={lastBookElementRef} key={book}>{book}</div>\n                } else {\n                    return <div key={book}>{book}</div>\n                }\n            })}\n            <div>{loading && 'Loading...'}</div>\n            <div>{error && 'Error'}</div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}