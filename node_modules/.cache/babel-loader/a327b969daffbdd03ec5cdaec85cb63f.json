{"ast":null,"code":"var _jsxFileName = \"/home/haan/moment-test/src/components/Pages/AccountConfirmation.js\";\n\n/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\nimport React, { useEffect, useState } from 'react';\nimport Page from '../Page';\nimport queryString from 'query-string';\nimport { confirm_account } from '../tools/ApiCalls';\nimport Spinner from '../Spinner';\nimport Alert from '@material-ui/lab/Alert';\nexport default function AccountConfirmation(props) {\n  const params = queryString.parse(props.location.search);\n  const token = params.token;\n  const [spin, setSpin] = useState(false);\n  const [response, setResponse] = useState(\"\");\n\n  const DisplayResponse = () => {\n    if (response === \"\") return (\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 20\n        }\n      })\n    );\n    return response ?\n    /*#__PURE__*/\n    React.createElement(Alert, {\n      severity: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 13\n      }\n    }, \"Votre compte a bien \\xE9t\\xE9 valid\\xE9, vous pouvez maintenant vous connecter\") :\n    /*#__PURE__*/\n    React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }\n    }, \"Une erreur est survenue lors de la confirmation du compte\");\n  };\n\n  useEffect(() => {\n    async function validateToken() {\n      setSpin(true);\n      let res = await confirm_account(token);\n      setSpin(false);\n      setResponse(res.ok);\n    }\n\n    validateToken();\n  }, []);\n  return (\n    /*#__PURE__*/\n    React.createElement(Page, {\n      title: \"Confirmation du compte\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, spin &&\n    /*#__PURE__*/\n    React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 22\n      }\n    }),\n    /*#__PURE__*/\n    React.createElement(DisplayResponse, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }))\n  );\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/AccountConfirmation.js"],"names":["React","useEffect","useState","Page","queryString","confirm_account","Spinner","Alert","AccountConfirmation","props","params","parse","location","search","token","spin","setSpin","response","setResponse","DisplayResponse","validateToken","res","ok"],"mappings":";;AAAA;;;;;;;;;AAUA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AAEA,eAAe,SAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAC/C,QAAMC,MAAM,GAAGN,WAAW,CAACO,KAAZ,CAAkBF,KAAK,CAACG,QAAN,CAAeC,MAAjC,CAAf;AACA,QAAMC,KAAK,GAAGJ,MAAM,CAACI,KAArB;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BhB,QAAQ,CAAC,EAAD,CAAxC;;AAEA,QAAMiB,eAAe,GAAG,MAAM;AAC1B,QAAIF,QAAQ,KAAK,EAAjB,EACI;AAAA;AAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAP;AACJ,WAAQA,QAAQ;AAAA;AACZ,wBAAC,KAAD;AAAO,MAAA,QAAQ,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wFADY;AAAA;AAEZ,wBAAC,KAAD;AAAO,MAAA,QAAQ,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mEAFJ;AAIH,GAPD;;AASAhB,EAAAA,SAAS,CAAC,MAAM;AACZ,mBAAemB,aAAf,GAA+B;AAC3BJ,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,UAAIK,GAAG,GAAG,MAAMhB,eAAe,CAACS,KAAD,CAA/B;AACAE,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAE,MAAAA,WAAW,CAACG,GAAG,CAACC,EAAL,CAAX;AACH;;AACDF,IAAAA,aAAa;AAGd,GAVM,EAUJ,EAVI,CAAT;AAYA;AAAA;AACI,wBAAC,IAAD;AAAM,MAAA,KAAK,EAAC,wBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKL,IAAI;AAAA;AAAI,wBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADb;AAAA;AAEI,wBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AADJ;AAMH","sourcesContent":["/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Page from '../Page';\nimport queryString from 'query-string';\nimport { confirm_account } from '../tools/ApiCalls';\nimport Spinner from '../Spinner';\nimport Alert from '@material-ui/lab/Alert';\n\nexport default function AccountConfirmation(props) {\n    const params = queryString.parse(props.location.search)\n    const token = params.token\n    const [spin, setSpin] = useState(false);\n    const [response, setResponse] = useState(\"\")\n    \n    const DisplayResponse = () => {\n        if (response === \"\")\n            return <div/>\n        return (response ? \n            <Alert severity=\"success\">Votre compte a bien été validé, vous pouvez maintenant vous connecter</Alert> :\n            <Alert severity=\"error\">Une erreur est survenue lors de la confirmation du compte</Alert>\n            )\n    }\n\n    useEffect(() => {\n        async function validateToken() {\n            setSpin(true)\n            let res = await confirm_account(token)\n            setSpin(false)\n            setResponse(res.ok)\n        }\n        validateToken()\n        \n\n      }, [])\n\n    return (\n        <Page title=\"Confirmation du compte\">\n            {spin && <Spinner />}\n            <DisplayResponse />\n        </Page>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}