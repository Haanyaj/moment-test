{"ast":null,"code":"import { useEffect, useState } from 'react';\nexport default function useBookSearch(query, pageNumber) {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [books, setBooks] = useState([]);\n  const [hasMore, setHasMore] = useState(false);\n  useEffect(() => {\n    setBooks([]);\n  }, [query]);\n  useEffect(() => {\n    setLoading(true);\n    setError(false);\n    let cancel;\n    fetch({\n      method: 'GET',\n      url: 'http://openlibrary.org/search.json',\n      params: {\n        q: query,\n        page: pageNumber\n      },\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      setBooks(prevBooks => {\n        return [...new Set([...prevBooks, ...res.data.docs.map(b => b.title)])];\n      });\n      setHasMore(res.data.docs.length > 0);\n      setLoading(false);\n    }).catch(e => {});\n    return () => cancel();\n  }, [query, pageNumber]);\n  return {\n    loading,\n    error,\n    books,\n    hasMore\n  };\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/useBookSearch.js"],"names":["useEffect","useState","useBookSearch","query","pageNumber","loading","setLoading","error","setError","books","setBooks","hasMore","setHasMore","cancel","fetch","method","url","params","q","page","cancelToken","axios","CancelToken","c","then","res","prevBooks","Set","data","docs","map","b","title","length","catch","e"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,UAA9B,EAA0C;AACvD,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBL,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,KAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,GAFQ,EAEN,CAACP,KAAD,CAFM,CAAT;AAIAH,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAE,IAAAA,QAAQ,CAAC,KAAD,CAAR;AACA,QAAIK,MAAJ;AACAC,IAAAA,KAAK,CAAC;AACJC,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,oCAFD;AAGJC,MAAAA,MAAM,EAAE;AAAEC,QAAAA,CAAC,EAAEf,KAAL;AAAYgB,QAAAA,IAAI,EAAEf;AAAlB,OAHJ;AAIJgB,MAAAA,WAAW,EAAE,IAAIC,KAAK,CAACC,WAAV,CAAsBC,CAAC,IAAIV,MAAM,GAAGU,CAApC;AAJT,KAAD,CAAL,CAKGC,IALH,CAKQC,GAAG,IAAI;AACbf,MAAAA,QAAQ,CAACgB,SAAS,IAAI;AACpB,eAAO,CAAC,GAAG,IAAIC,GAAJ,CAAQ,CAAC,GAAGD,SAAJ,EAAe,GAAGD,GAAG,CAACG,IAAJ,CAASC,IAAT,CAAcC,GAAd,CAAkBC,CAAC,IAAIA,CAAC,CAACC,KAAzB,CAAlB,CAAR,CAAJ,CAAP;AACD,OAFO,CAAR;AAGApB,MAAAA,UAAU,CAACa,GAAG,CAACG,IAAJ,CAASC,IAAT,CAAcI,MAAd,GAAuB,CAAxB,CAAV;AACA3B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAXD,EAWG4B,KAXH,CAWSC,CAAC,IAAI,CAEb,CAbD;AAcA,WAAO,MAAMtB,MAAM,EAAnB;AACD,GAnBQ,EAmBN,CAACV,KAAD,EAAQC,UAAR,CAnBM,CAAT;AAqBA,SAAO;AAAEC,IAAAA,OAAF;AAAWE,IAAAA,KAAX;AAAkBE,IAAAA,KAAlB;AAAyBE,IAAAA;AAAzB,GAAP;AACD","sourcesContent":["import { useEffect, useState } from 'react'\n\nexport default function useBookSearch(query, pageNumber) {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [books, setBooks] = useState([])\n  const [hasMore, setHasMore] = useState(false)\n\n  useEffect(() => {\n    setBooks([])\n  }, [query])\n\n  useEffect(() => {\n    setLoading(true)\n    setError(false)\n    let cancel\n    fetch({\n      method: 'GET',\n      url: 'http://openlibrary.org/search.json',\n      params: { q: query, page: pageNumber },\n      cancelToken: new axios.CancelToken(c => cancel = c)\n    }).then(res => {\n      setBooks(prevBooks => {\n        return [...new Set([...prevBooks, ...res.data.docs.map(b => b.title)])]\n      })\n      setHasMore(res.data.docs.length > 0)\n      setLoading(false)\n    }).catch(e => {\n\n    })\n    return () => cancel()\n  }, [query, pageNumber])\n\n  return { loading, error, books, hasMore }\n}"]},"metadata":{},"sourceType":"module"}