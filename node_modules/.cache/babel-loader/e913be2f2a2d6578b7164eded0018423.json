{"ast":null,"code":"var _jsxFileName = \"/home/haan/application-web/touch31_app/src/components/Pages/Approve.js\";\n\n/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\nimport React, { useEffect, useState } from 'react';\nimport Page from '../Page';\nimport { Card, makeStyles, Button, Box } from '@material-ui/core';\nimport SignIn from './SignIn';\nimport { useStore } from 'react-hookstore';\nimport queryString from 'query-string';\nimport Logo from '../Logo';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { authorize_merchant, revoke_merchant, get_merchants, get_merchant } from '../tools/ApiCalls';\nimport { api_link } from '../../globals';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    textAlign: 'center'\n  },\n  image: {\n    margin: '0 auto',\n    width: 200,\n    height: 200,\n    display: 'block'\n  },\n  card: {\n    padding: theme.spacing(2)\n  },\n  buttons: {\n    textAlign: 'right',\n    marginTop: theme.spacing(5)\n  },\n  icon: {\n    color: theme.palette.primary.main\n  }\n}));\nexport default function Approve(props) {\n  const classes = useStyles();\n  const [auth, setAuth] = useStore('authStore');\n  const [merchant, setMerchant] = useState({});\n  const [picture, setPicture] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const params = queryString.parse(props.location.search);\n  console.log(params);\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await get_merchants();\n      result.merchants.map((merchant, key) => {\n        if (merchant.id == params.merchantId) {\n          setMerchant(merchant);\n          setName(merchant.name);\n          merchant.pictures.length && setPicture(api_link + \"/\" + merchant.pictures[0].path);\n          console.log(merchant.pictures);\n          console.log(merchant);\n        }\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const accept = async () => {\n    await authorize_merchant(params.merchantId); // Let's assume that the parameter handled is named merchantId\n\n    window.close();\n  };\n\n  const refuse = () => {\n    window.close();\n  };\n\n  return auth ?\n  /*#__PURE__*/\n  React.createElement(Page, {\n    center: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  },\n  /*#__PURE__*/\n  React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }),\n  /*#__PURE__*/\n  React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  },\n  /*#__PURE__*/\n  React.createElement(\"img\", {\n    src: picture,\n    alt: \"merchant_picture\",\n    className: classes.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }),\n  /*#__PURE__*/\n  React.createElement(Box, {\n    m: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, name, \" recevra les informations concernants vos profils de mesures\"),\n  /*#__PURE__*/\n  React.createElement(Box, {\n    m: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  },\n  /*#__PURE__*/\n  React.createElement(LockIcon, {\n    className: classes.icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 24\n    }\n  }), \" Cela ne donne pas acc\\xE8s aux informations personnelles de votre compte\"),\n  /*#__PURE__*/\n  React.createElement(\"div\", {\n    className: classes.buttons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  },\n  /*#__PURE__*/\n  React.createElement(Button, {\n    className: classes.button,\n    onClick: refuse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, \"Refuser\"),\n  /*#__PURE__*/\n  React.createElement(Button, {\n    onClick: accept,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Accepter\")))) :\n  /*#__PURE__*/\n  React.createElement(SignIn, {\n    noRedirect: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  });\n}","map":{"version":3,"sources":["/home/haan/application-web/touch31_app/src/components/Pages/Approve.js"],"names":["React","useEffect","useState","Page","Card","makeStyles","Button","Box","SignIn","useStore","queryString","Logo","LockIcon","authorize_merchant","revoke_merchant","get_merchants","get_merchant","api_link","useStyles","theme","root","width","button","marginRight","spacing","instructions","marginTop","marginBottom","textAlign","image","margin","height","display","card","padding","buttons","icon","color","palette","primary","main","Approve","props","classes","auth","setAuth","merchant","setMerchant","picture","setPicture","name","setName","params","parse","location","search","console","log","fetchData","result","merchants","map","key","id","merchantId","pictures","length","path","accept","window","close","refuse"],"mappings":"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","sourcesContent":["/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Page from '../Page';\nimport { Card, makeStyles, Button, Box } from '@material-ui/core';\nimport SignIn from './SignIn';\nimport { useStore } from 'react-hookstore';\nimport queryString from 'query-string';\nimport Logo from '../Logo';\nimport LockIcon from '@material-ui/icons/Lock';\nimport { authorize_merchant, revoke_merchant, get_merchants, get_merchant } from '../tools/ApiCalls';\nimport { api_link } from '../../globals';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n    },\n    button: {\n        marginRight: theme.spacing(1),\n    },\n    instructions: {\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n        textAlign: 'center',\n    },\n    image: {\n        margin: '0 auto',\n        width: 200,\n        height: 200,\n        display: 'block',\n    },\n    card: {\n        padding: theme.spacing(2),\n    },\n    buttons: {\n        textAlign: 'right',\n        marginTop: theme.spacing(5),\n    },\n    icon: {\n        color: theme.palette.primary.main\n    }\n}));\n\nexport default function Approve(props) {\n    const classes = useStyles();\n    const [auth, setAuth] = useStore('authStore');\n    const [merchant, setMerchant] = useState({})\n    const [picture, setPicture] = useState(\"\")\n    const [name, setName] = useState(\"\")\n    const params = queryString.parse(props.location.search)\n    console.log(params)\n\n    useEffect(() => {\n        const fetchData = async () => {\n            const result = await get_merchants()\n            result.merchants.map((merchant, key) => {\n                if (merchant.id == params.merchantId) {\n                    setMerchant(merchant)\n                    setName(merchant.name)\n                    merchant.pictures.length && setPicture(api_link + \"/\" + merchant.pictures[0].path)\n                    console.log(merchant.pictures)\n                    console.log(merchant)\n                }\n            })\n        };\n        fetchData();\n    }, [])\n\n    const accept = async () => {\n        await authorize_merchant(params.merchantId); // Let's assume that the parameter handled is named merchantId\n        window.close();\n    }\n\n    const refuse = () => {\n        window.close();\n    }\n\n    return (\n        auth ?\n            <Page center >\n                <Logo />\n                <Card className={classes.card}>\n\n                <img src={picture} alt=\"merchant_picture\" className={classes.image} />\n                    \n                    <Box m={2}>\n                    {name} recevra les informations concernants vos profils de mesures\n                    </Box>\n                    <Box m={2}>\n                       <LockIcon className={classes.icon} /> Cela ne donne pas accès aux informations personnelles de votre compte\n                    </Box>\n                        <div className={classes.buttons}>\n                        <Button className={classes.button} onClick={refuse}>\n                            Refuser\n                </Button>\n                        <Button\n                        onClick={accept}\n                            variant=\"contained\"\n                            color=\"primary\"\n                        >\n                            Accepter\n                        </Button>\n                    </div>\n                    \n                </Card>\n            </Page> :\n            <SignIn noRedirect />\n    );\n}"]},"metadata":{},"sourceType":"module"}