{"ast":null,"code":"var _jsxFileName = \"/home/haan/moment-test/src/components/Pages/Movie.js\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport useBookSearch from './useBookSearch';\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const [pageNumber, setPageNumber] = useState(1);\n  const {\n    movies,\n    hasMore,\n    loading,\n    totalPages\n  } = useBookSearch(\"fr-FR\", pageNumber);\n\n  async function getTotalPages() {\n    this.state.totalPages = await request_pages();\n  }\n\n  async function loadMore() {\n    if (this.state.pages === 2\n    /*this.state.totalPages*/\n    ) {\n        this.setState({\n          hasMoreItems: false\n        });\n      } else {\n      const response = await request_token(\"fr-FR\", this.state.pages);\n      setTimeout(() => {\n        const add = this.state.data;\n        const to_add = add.concat(response);\n        this.setState({\n          data: to_add\n        });\n      }, 2000);\n    }\n\n    this.state.pages += 1;\n  }\n\n  return (\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }\n    }, books.map((book, index) => {\n      if (books.length === index + 1) {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            ref: lastBookElementRef,\n            key: book,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 28\n            }\n          }, book)\n        );\n      } else {\n        return (\n          /*#__PURE__*/\n          React.createElement(\"div\", {\n            key: book,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 28\n            }\n          }, book)\n        );\n      }\n    }),\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, loading && 'Loading...'),\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 13\n      }\n    }, error && 'Error'))\n  );\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/Movie.js"],"names":["React","useState","useRef","useCallback","useBookSearch","App","query","setQuery","pageNumber","setPageNumber","movies","hasMore","loading","totalPages","getTotalPages","state","request_pages","loadMore","pages","setState","hasMoreItems","response","request_token","setTimeout","add","data","to_add","concat","books","map","book","index","length","lastBookElementRef","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,WAAlC,QAAqD,OAArD;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,eAAe,SAASC,GAAT,GAAe;AAC1B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BR,QAAQ,CAAC,CAAD,CAA5C;AAEA,QAAM;AACFS,IAAAA,MADE;AAEFC,IAAAA,OAFE;AAGFC,IAAAA,OAHE;AAIFC,IAAAA;AAJE,MAKFT,aAAa,CAAC,OAAD,EAAUI,UAAV,CALjB;;AAOA,iBAAeM,aAAf,GAA+B;AAC3B,SAAKC,KAAL,CAAWF,UAAX,GAAwB,MAAMG,aAAa,EAA3C;AACH;;AAED,iBAAeC,QAAf,GAA0B;AACtB,QAAI,KAAKF,KAAL,CAAWG,KAAX,KAAqB;AAAE;AAA3B,MAAsD;AAClD,aAAKC,QAAL,CAAc;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACH,OAFD,MAEO;AACH,YAAMC,QAAQ,GAAG,MAAMC,aAAa,CAAC,OAAD,EAAU,KAAKP,KAAL,CAAWG,KAArB,CAApC;AACAK,MAAAA,UAAU,CAAC,MAAM;AACb,cAAMC,GAAG,GAAG,KAAKT,KAAL,CAAWU,IAAvB;AACA,cAAMC,MAAM,GAAGF,GAAG,CAACG,MAAJ,CAAWN,QAAX,CAAf;AACA,aAAKF,QAAL,CAAc;AAAEM,UAAAA,IAAI,EAAEC;AAAR,SAAd;AACH,OAJS,EAIP,IAJO,CAAV;AAKH;;AACD,SAAKX,KAAL,CAAWG,KAAX,IAAoB,CAApB;AACH;;AAED;AAAA;AACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKU,KAAK,CAACC,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,KAAiB;AACxB,UAAIH,KAAK,CAACI,MAAN,KAAiBD,KAAK,GAAG,CAA7B,EAAgC;AAC5B;AAAA;AAAO;AAAK,YAAA,GAAG,EAAEE,kBAAV;AAA8B,YAAA,GAAG,EAAEH,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA0CA,IAA1C;AAAP;AACH,OAFD,MAEO;AACH;AAAA;AAAO;AAAK,YAAA,GAAG,EAAEA,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAiBA,IAAjB;AAAP;AACH;AACJ,KANA,CADL;AAAA;AAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMlB,OAAO,IAAI,YAAjB,CARJ;AAAA;AASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMsB,KAAK,IAAI,OAAf,CATJ;AADJ;AAaH","sourcesContent":["import React, { useState, useRef, useCallback } from 'react'\nimport useBookSearch from './useBookSearch'\n\nexport default function App() {\n    const [query, setQuery] = useState('')\n    const [pageNumber, setPageNumber] = useState(1)\n\n    const {\n        movies,\n        hasMore,\n        loading,\n        totalPages,\n    } = useBookSearch(\"fr-FR\", pageNumber)\n\n    async function getTotalPages() {\n        this.state.totalPages = await request_pages();\n    }\n\n    async function loadMore() {\n        if (this.state.pages === 2 /*this.state.totalPages*/) {\n            this.setState({ hasMoreItems: false });\n        } else {\n            const response = await request_token(\"fr-FR\", this.state.pages);\n            setTimeout(() => {\n                const add = this.state.data;\n                const to_add = add.concat(response);\n                this.setState({ data: to_add })\n            }, 2000);\n        }\n        this.state.pages += 1\n    }\n\n    return (\n        <div>\n            {books.map((book, index) => {\n                if (books.length === index + 1) {\n                    return <div ref={lastBookElementRef} key={book}>{book}</div>\n                } else {\n                    return <div key={book}>{book}</div>\n                }\n            })}\n            <div>{loading && 'Loading...'}</div>\n            <div>{error && 'Error'}</div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}