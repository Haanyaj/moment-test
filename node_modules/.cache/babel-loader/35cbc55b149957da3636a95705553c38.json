{"ast":null,"code":"var _jsxFileName = \"/home/haan/application-web/touch31_app/src/components/Pages/resetPassword.js\";\n\n/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\nimport React, { Component, useEffect, useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport { Card, CardContent, withStyles, InputAdornment } from '@material-ui/core';\nimport { reset_password } from '../tools/ApiCalls';\nimport { useForm } from 'react-hook-form';\nimport LockIcon from '@material-ui/icons/Lock';\nimport TextFieldIcon from '../TextFieldIcon';\nimport Page from '../Page';\nimport AlertMessage from '../tools/popup';\nimport AlertMessageError from '../tools/popupError';\nimport queryString from 'query-string';\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n    margin: 'auto'\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  margin: {\n    margin: theme.spacing(1)\n  }\n}));\nexport default function ForgotPassword(props) {\n  const classes = useStyles();\n  const params = queryString.parse(props.location.search);\n  const token = params.token;\n  const [setOn, setStatusBase] = useState('');\n  const [setOn2, setStatusBase2] = useState('');\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n\n  const onSubmit = async data => {\n    console.log(token);\n\n    if (data.password === data.confirmPassword) {\n      const response = await reset_password(token, data.password);\n\n      if (response.status === 204) {\n        setStatusBase({\n          msg: \"Votre mot de passe a bien été modifié.\",\n          key: Math.random()\n        });\n        setTimeout(function () {\n          props.history.push('/');\n        }, 3000);\n      } else if (response.status === 400) {\n        setStatusBase2({\n          msg: \"Oops! Une erreur est survenue. Veuillez réessayer.\",\n          key: Math.random()\n        });\n      }\n    }\n  };\n\n  useEffect(() => {});\n  const pass = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;\n  const re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n  return (\n    /*#__PURE__*/\n    React.createElement(Page, {\n      center: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Container, {\n      component: \"main\",\n      maxWidth: \"xs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Avatar, {\n      className: classes.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(LockOutlinedIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 19\n      }\n    })),\n    /*#__PURE__*/\n    React.createElement(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, \"Thirty One\"),\n    /*#__PURE__*/\n    React.createElement(\"form\", {\n      className: classes.form,\n      onSubmit: handleSubmit(onSubmit),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(TextFieldIcon, {\n      startIcon:\n      /*#__PURE__*/\n      React.createElement(LockIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 36\n        }\n      }),\n      variant: \"standard\",\n      fullWidth: true,\n      name: \"password\",\n      label: \"Mot de passe *\",\n      type: \"password\",\n      error: errors.password,\n      inputRef: register({\n        required: {\n          value: true,\n          message: \"Champs requis *\"\n        },\n        pattern: {\n          value: pass,\n          message: \"Doit avoir 8 caractères, une majuscule, une minuscule et un chiffre\"\n        }\n      }),\n      helperText: errors.password ? errors.password.message : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 23\n      }\n    })),\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(TextFieldIcon, {\n      startIcon:\n      /*#__PURE__*/\n      React.createElement(LockIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 36\n        }\n      }),\n      variant: \"standard\",\n      fullWidth: true,\n      name: \"confirmPassword\",\n      label: \"Confirmez le mot de passe *\",\n      type: \"password\",\n      error: errors.confirmPassword,\n      inputRef: register({\n        required: {\n          value: true,\n          message: \"Champs requis *\"\n        },\n        pattern: {\n          value: pass,\n          message: \"Doit avoir 8 caractères, une majuscule, une minuscule et un chiffre\"\n        }\n      }),\n      helperText: errors.confirmPassword ? errors.confirmPassword.message : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 23\n      }\n    }))),\n    /*#__PURE__*/\n    React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      className: classes.submit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, \"Valider le nouveau mot de passe\"), setOn ?\n    /*#__PURE__*/\n    React.createElement(AlertMessage, {\n      key: setOn.key,\n      message: setOn.msg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 28\n      }\n    }) : null, setOn2 ?\n    /*#__PURE__*/\n    React.createElement(AlertMessageError, {\n      key: setOn2.key,\n      message: setOn2.msg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }) : null,\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      container: true,\n      justify: \"flex-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }))))))))\n  );\n}","map":{"version":3,"sources":["/home/haan/application-web/touch31_app/src/components/Pages/resetPassword.js"],"names":["React","Component","useEffect","useState","Avatar","Button","Grid","LockOutlinedIcon","Typography","makeStyles","Container","Card","CardContent","withStyles","InputAdornment","reset_password","useForm","LockIcon","TextFieldIcon","Page","AlertMessage","AlertMessageError","queryString","useStyles","theme","avatar","margin","spacing","backgroundColor","palette","secondary","main","form","width","marginTop","submit","ForgotPassword","props","classes","params","parse","location","search","token","setOn","setStatusBase","setOn2","setStatusBase2","register","handleSubmit","watch","errors","onSubmit","data","console","log","password","confirmPassword","response","status","msg","key","Math","random","setTimeout","history","push","pass","re","textAlign","required","value","message","pattern"],"mappings":"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","sourcesContent":["/*\n *\n *  *  Copyright (C) Thirty One, Inc - All Rights Reserved\n *  *  * Unauthorized copying of this file, via any medium is strictly prohibited\n *  *  * Proprietary and confidential\n *  *  * Written by Thirty One <thirtyoneparis@gmail.com>, 2020\n *  *\n *\n */\n\nimport React, { Component, useEffect, useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport { Card, CardContent, withStyles, InputAdornment } from '@material-ui/core';\nimport { reset_password } from '../tools/ApiCalls'\nimport { useForm } from 'react-hook-form';\nimport LockIcon from '@material-ui/icons/Lock';\nimport TextFieldIcon from '../TextFieldIcon';\nimport Page from '../Page';\nimport AlertMessage from '../tools/popup'\nimport AlertMessageError from '../tools/popupError'\nimport queryString from 'query-string';\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n    margin: 'auto',\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  margin: {\n    margin: theme.spacing(1),\n  },\n}));\n\nexport default function ForgotPassword(props) {\n  const classes = useStyles();\n  const params = queryString.parse(props.location.search);\n  const token = params.token;\n  const [setOn, setStatusBase] = useState('');\n  const [setOn2, setStatusBase2] = useState('');\n  const { register, handleSubmit, watch, errors } = useForm();\n  const onSubmit = async data => {\n    console.log(token)\n    if (data.password === data.confirmPassword) {\n      const response = await reset_password(token, data.password);\n      if (response.status === 204) {\n        setStatusBase({ msg: \"Votre mot de passe a bien été modifié.\", key: Math.random() })\n        setTimeout(function () { props.history.push('/') }, 3000);\n      } else if (response.status === 400) {\n        setStatusBase2({ msg: \"Oops! Une erreur est survenue. Veuillez réessayer.\", key: Math.random() })\n      }\n    }\n  }\n\n  useEffect(() => {\n  });\n  const pass = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$/;\n  const re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n  return (\n    <Page center>\n      <div>\n        <Container component=\"main\" maxWidth=\"xs\"  >\n          <div>\n            <Card>\n              <CardContent>\n                <Avatar className={classes.avatar}>\n                  <LockOutlinedIcon />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\" style={{ textAlign: 'center' }}>\n                  Thirty One\n              </Typography>\n                <form className={classes.form} onSubmit={handleSubmit(onSubmit)}>\n                  <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                      <TextFieldIcon\n                        startIcon={<LockIcon />}\n                        variant=\"standard\"\n                        fullWidth\n                        name=\"password\"\n                        label=\"Mot de passe *\"\n                        type=\"password\"\n                        error={errors.password}\n                        inputRef={register({\n                          required: {\n                            value: true,\n                            message: \"Champs requis *\"\n                          },\n                          pattern: {\n                            value: pass,\n                            message: \"Doit avoir 8 caractères, une majuscule, une minuscule et un chiffre\"\n                          }\n                        })}\n                        helperText={errors.password ? errors.password.message : ''}\n                      />\n                    </Grid>\n                    <Grid item xs={12}>\n                      <TextFieldIcon\n                        startIcon={<LockIcon />}\n                        variant=\"standard\"\n                        fullWidth\n                        name=\"confirmPassword\"\n                        label=\"Confirmez le mot de passe *\"\n                        type=\"password\"\n                        error={errors.confirmPassword}\n                        inputRef={register({\n                          required: {\n                            value: true,\n                            message: \"Champs requis *\"\n                          },\n                          pattern: {\n                            value: pass,\n                            message: \"Doit avoir 8 caractères, une majuscule, une minuscule et un chiffre\"\n                          }\n                        })}\n                        helperText={errors.confirmPassword ? errors.confirmPassword.message : ''}\n                      />\n                    </Grid>\n                  </Grid>\n                  <Button\n                    type=\"submit\"\n                    fullWidth\n                    variant=\"contained\"\n                    color=\"primary\"\n                    className={classes.submit}\n                  >\n                    {\"Valider le nouveau mot de passe\"}\n                  </Button>\n                  {setOn ? <AlertMessage key={setOn.key} message={setOn.msg} /> : null}\n                  {setOn2 ? <AlertMessageError key={setOn2.key} message={setOn2.msg} /> : null}\n                  <Grid container justify=\"flex-end\">\n                  </Grid>\n                </form>\n              </CardContent>\n            </Card>\n          </div>\n        </Container>\n      </div>\n    </Page>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}