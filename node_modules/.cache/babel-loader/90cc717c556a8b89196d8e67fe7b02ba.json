{"ast":null,"code":"var _jsxFileName = \"/home/haan/moment-test/src/components/Pages/Movie.js\";\nimport useBookSearch from './useBookSearch';\nimport React, { Component, useState } from 'react';\nimport { request_token, request_pages } from '../tools/ApiCalls';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withStyles } from '@material-ui/core/styles';\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport Container from '@material-ui/core/Container';\nimport Spinner from '../Spinner';\nimport Grid from '@material-ui/core/Grid';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport movieCard from '../movieCard';\nexport default function App() {\n  const [query, setQuery] = useState('');\n  const [pageNumber, setPageNumber] = useState(1);\n  const {\n    movies,\n    hasMore,\n    loading,\n    totalPages\n  } = useBookSearch(\"fr-FR\", pageNumber);\n\n  async function getTotalPages() {\n    this.state.totalPages = await request_pages();\n  }\n\n  async function loadMore() {\n    if (this.state.pages === 2\n    /*this.state.totalPages*/\n    ) {\n        this.setState({\n          hasMoreItems: false\n        });\n      } else {\n      const response = await request_token(\"fr-FR\", this.state.pages);\n      setTimeout(() => {\n        const add = this.state.data;\n        const to_add = add.concat(response);\n        this.setState({\n          data: to_add\n        });\n      }, 2000);\n    }\n\n    this.state.pages += 1;\n  }\n\n  return (\n    /*#__PURE__*/\n    React.createElement(\"div\", {\n      loader: this.getTotalPages(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    },\n    /*#__PURE__*/\n    React.createElement(InfiniteScroll, {\n      loadMore: loadMore.bind(),\n      hasMore: this.state.hasMore,\n      loader:\n      /*#__PURE__*/\n      React.createElement(\"div\", {\n        className: \"loader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }\n      }, loading && 'Loading...'),\n      useWindow: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, this.showItems(), \" \"), \" \")))\n  );\n}","map":{"version":3,"sources":["/home/haan/moment-test/src/components/Pages/Movie.js"],"names":["useBookSearch","React","Component","useState","request_token","request_pages","makeStyles","withStyles","InfiniteScroll","Container","Spinner","Grid","Dialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","IconButton","CloseIcon","Typography","Card","CardActionArea","CardActions","CardContent","CardMedia","movieCard","App","query","setQuery","pageNumber","setPageNumber","movies","hasMore","loading","totalPages","getTotalPages","state","loadMore","pages","setState","hasMoreItems","response","setTimeout","add","data","to_add","concat","bind","showItems"],"mappings":"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","sourcesContent":["import useBookSearch from './useBookSearch'\nimport React, { Component, useState } from 'react';\nimport { request_token, request_pages } from '../tools/ApiCalls';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { withStyles } from '@material-ui/core/styles';\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport Container from '@material-ui/core/Container';\nimport Spinner from '../Spinner'\nimport Grid from '@material-ui/core/Grid';\nimport Dialog from '@material-ui/core/Dialog';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport MuiDialogContent from '@material-ui/core/DialogContent';\nimport MuiDialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport movieCard from '../movieCard'\n\nexport default function App() {\n    const [query, setQuery] = useState('')\n    const [pageNumber, setPageNumber] = useState(1)\n\n    const {\n        movies,\n        hasMore,\n        loading,\n        totalPages,\n    } = useBookSearch(\"fr-FR\", pageNumber)\n\n    async function getTotalPages() {\n        this.state.totalPages = await request_pages();\n    }\n\n    async function loadMore() {\n        if (this.state.pages === 2 /*this.state.totalPages*/) {\n            this.setState({ hasMoreItems: false });\n        } else {\n            const response = await request_token(\"fr-FR\", this.state.pages);\n            setTimeout(() => {\n                const add = this.state.data;\n                const to_add = add.concat(response);\n                this.setState({ data: to_add })\n            }, 2000);\n        }\n        this.state.pages += 1\n    }\n\n    return (\n        <div\n        loader={this.getTotalPages()}\n    >\n        <Container>\n            <Grid>\n            <InfiniteScroll\n                loadMore={loadMore.bind()}\n                hasMore={this.state.hasMore}\n                loader={<div className=\"loader\">{loading && 'Loading...'}</div>}\n                useWindow={false}\n            >\n                {this.showItems()}{\" \"}\n            </InfiniteScroll>{\" \"}\n            </Grid>\n        </Container>\n    </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}